title=Dr Haskell
tags=program haskell yhc

<p>
	Dr Haskell is a tool to detect common mistakes in beginner Haskell programs. This program is still
	very much in development, and requires a working copy of <!yhc> to be available.
</p>
<p>
	To get a feel for the power of Dr Haskell, see the following example, based on
	<a href="http://thread.gmane.org/gmane.comp.lang.haskell.cafe/15234/focus=15234">code sent</a> to
	the haskell-cafe mailing list.
</p>
<p>
	Given the file Test.hs:
</p>
<pre>
module Test where

substitute1 :: Eq a => a -> [a] -> [a] -> [a]
substitute1 e l1 l2= [c | c <- check_elem l1]
   where check_elem [] = l1
         check_elem (x:xs) = if x == e then (l2 ++ xs) else [x] ++ check_elem xs

substitute2 e l l'
  = concat (map subst_elem l)
    where subst_elem x
              | x == e = l'
              | otherwise = [x]

subst3 e l [] = []
subst3 e l (x:xs) = if x == e then l ++ xs else x : subst3 e l xs

subst4 e l' = concat.map (\x->if x==e then l' else [x])
</pre>
<p>
	Produces the output:
</p>
<pre>
> drhaskell Test.hs
I can apply box_append in check_elem (5:10-6:80)
I can apply concat_map in substitute2 (8:1-12:31)
I can apply concat_map in subst4 (17:1-17:54)
</pre>

<p>
	A list of hints is provided, but more can be easily added, without even recompiling
	the program. The hints shown above correspond to <tt>concat . map</tt> can be replaced with
	<tt>concatMap</tt>, and <tt>[x] ++ xs</tt> can be replaced with <tt>x : xs</tt>. The hints are
	all available in the source file
	<a href="http://www.cs.york.ac.uk/fp/darcs/drhaskell/Hints.hs">Hints.hs</a>.
</p>

<h2>Installation</h2>

<p>
	Step 1 is to get a working copy of <!yhc>.
</p>
<p>
	Step 2 is to get a working copy of Dr Haskell, either from the darcs repo above (note, you'll need a
	source release of Yhc to compile Dr Haskell, since it requires some Yhc libraries), or download a
	Windows binary <a href="http://www.cs.york.ac.uk/fp/release/drhaskell-08-nov-2006.zip">here</a>, and extract all the files.
<p>

<h2>Use</h2>

<p>
	Change into the same directory as the Dr Haskell program. First compile your sample code
	using Yhc, with the command <tt>yhc -corep File.hs</tt>, check that works, fix any errors.
	Next run <tt>drhaskell File.hs</tt> and see the results.
</p>
