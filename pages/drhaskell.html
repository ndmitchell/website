title=Dr Haskell
tags=program haskell popular

<p>
	Dr Haskell is a tool to detect common mistakes in Haskell programs.
</p>
<p>
	To get a feel for the power of Dr Haskell, here is a small amount of the output generated by running the tool over the <a href="http://darcs.net/">darcs</a> source code:
</p>
<pre>
$ drhaskell darcs-2.1.2

darcs-2.1.2\src\CommandLine.lhs:46:1: Use a string literal
Found:
  [' ', '\t', '"', '%']
Why not:
  " \t\"%"

darcs-2.1.2\src\CommandLine.lhs:49:1: Eta reduce
Found:
  quotedArg ftable
    = between (char '"') (char '"') $ quoteContent ftable
Why not:
  quotedArg = between (char '"') (char '"') . quoteContent

darcs-2.1.2\src\CommandLine.lhs:94:1: Use concatMap
Found:
  concat $ map escapeC s
Why not:
  concatMap escapeC s

darcs-2.1.2\src\CommandLine.lhs:103:1: Use fewer brackets
Found:
  ftable ++ (map (\ (c, x) -&gt; (toUpper c, urlEncode x)) ftable)
Why not:
  ftable ++ map (\ (c, x) -&gt; (toUpper c, urlEncode x)) ftable

darcs-2.1.2\src\Darcs\Patch\ReadMonads.hs:61:29: Use const
Found:
  \ _ -&gt; Nothing
Why not:
  const Nothing

darcs-2.1.2\src\Darcs\RemoteApply.lhs:62:1: Use a list comprehension
Found:
  if Debug `elem` opts then ["--debug"] else []
Why not:
  ["--debug" | (Debug `elem` opts)]

darcs-2.1.2\src\Ssh.hs:155:17: Use isPrefixOf, and then remove the (==) test
Found:
  take 1 path == "~"
Why not:
  (1 == length "~") && ("~" `isPrefixOf` path)
</pre>

<p>
	Dr Haskell can only be compiled by GHC 6.10.1 or above (it makes use of view patterns), but does not require any copy of GHC to run. Dr Haskell should be able to give hints for any Haskell code, including most GHC extensions. As with any good tool, Dr Haskell has been used in the development of itself, and all suggestions have been fixed.
</p>

<h2>Acknowledgements</h2>

<p>
	This package has only been made possible by the presence of the <a href="http://www.cs.chalmers.se/~d00nibro/haskell-src-exts/">haskell-src-exts</a> package, and many useful improvements have been made by <a href="http://www.cs.chalmers.se/~d00nibro/">Niklas Broberg</a> in response to feature requests.
</p>
